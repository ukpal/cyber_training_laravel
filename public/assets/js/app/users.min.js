$(function () {
    if ($(".flash-message").length > 0) {
        setTimeout(function () {
            $('.flash-message').fadeOut('fast');
        }, 5000);
    }

});

//verify email address
$(document).on("click", ".btn-login", function () {
    var username = $("#username").val();
    var error = false;

    hideError("username");

    if (username.trim() == "") {
        showError("username", "This is required");
        error = true;
    } 

    if (!error) {
        $(this).closest("form").submit();
    }
});

//verify otp
$(document).on("click", ".btn-otp", function () {
    var otp = $("#otp").val();
    var error = false;

    hideError("otp");

    if (otp.trim() == "") {
        showError("otp", "One time password is required");
        error = true;
    } else if (otp.trim().length != 6) {
        showError("otp", "Enter 6 digit code");
        error = true;
    }

    if (!error) {
        $(this).closest("form").submit();
    }
});

//verify otp

$(document).on('click', '.add_member', function() {  
    var error = false;
    var fullnm = $('#fullnm').val();
    var designation = $('#designation').val();
    var organisation = $('#organisation').val();
    var mobile = $('#mobile').val();
    var email = $('#email').val();
    var atLeastOneIsChecked = $('input[name="role[]"]:checked').length;
    hideError('fullnm');
    hideError('designation');
    hideError('organisation');
    hideError('mobile');
    hideError('email');
    hideError('role_area');
    

    if(fullnm == ''){
      error = true;
      showError('fullnm','Full Name Cannot be Blank')
    }

    if(designation == ''){
      error = true;
      showError('designation','Designation Cannot be Blank')
    }

    if(organisation == ''){
      error = true;
      showError('organisation','Organisation Cannot be Blank')
    }

    if(mobile == ''){
      error = true;
      showError('mobile','Mobile Number Cannot be Blank')
    }else if ('10' != (mobile.length)) {
        error = true;
        showError('mobile', 'Invalid Mobile Number');
    }

    var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if (email=="") {
        error = true;
        showError('email', 'Email Address can\'t blank');
    }else if (!regex.test(email)) {
        error = true;
        showError('email', 'Invalid Email Address');
    }

    if (atLeastOneIsChecked == 0) {
        error = true
        showError('role_area', "Please select at least one Role")
    }
    
    if (!error) {
        $(this).closest("form").submit();        
    }
});

//scrunity commity status update

$(document).on('click', '.scrutiny_commity', function() { 
    var error = false;
    var s_status = $('#s_status').val();
    var s_remarks = $('#s_remarks').val();

    //alert(s_status); 

    hideError('s_status');
    hideError('s_remarks');
    if(s_status == ''){
        error = true;
        showError('s_status','Status Cannot be Blank')
    }

    if(s_remarks == ''){
        error = true;
        showError('s_remarks','Remarks Cannot be Blank')
    }

    if (!error) {
        $(this).closest("form").submit();
        $('#scrutinyModal').modal( 'hide' );        
    }
});
